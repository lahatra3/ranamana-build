"use strict";(self.webpackChunknamana=self.webpackChunknamana||[]).push([[129],{1129:(M,s,a)=>{a.r(s),a.d(s,{NamanaModule:()=>C});var c=a(6895),r=a(6773),d=a(9751),n=a(8256),g=a(2340),m=a(529);let l=(()=>{class t{constructor(e){this.http=e}getKey(){return localStorage.getItem("ranamanaKey")}requestOpenai(e){return this.http.post(`${g.N.baseUrl}/v1/completions`,{model:"text-davinci-003",prompt:e,temperature:.99,max_tokens:3131,top_p:1,frequency_penalty:0,presence_penalty:.6,stop:[".?!,;"]},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getKey()}`},observe:"response"})}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(m.eN))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=a(263);function h(t,i){if(1&t&&n._UZ(0,"div",19),2&t){const e=n.oxw();n.Tol(e.statusVoice?"speak":"")}}function p(t,i){if(1&t&&(n.TgZ(0,"div",20)(1,"span",21),n._uU(2,"Vous:"),n.qZA(),n._uU(3),n.qZA()),2&t){const e=n.oxw();n.xp6(3),n.hij(" ",e.textRequest," ")}}function v(t,i){if(1&t&&(n.TgZ(0,"div",22)(1,"span",21),n._uU(2,"Ranamana:"),n.qZA(),n._uU(3),n.qZA()),2&t){const e=n.oxw();n.Akn("color: "+(e.responseError?"#e00606ef":"#0d091cd6")),n.xp6(3),n.hij(" ",e.textResponse," ")}}const _=[{path:"",component:(()=>{class t{constructor(e,o){this.namanaService=e,this.authService=o,this.recognition=new webkitSpeechRecognition||new SpeechRecognition,this.synthesis=window.speechSynthesis}initRecognition(){this.recognition.continuous=!0,this.recognition.lang="fr-FR",this.recognition.interimResults=!1,this.recognition.maxAlternatives=1}recognitionFeatures(){this.recognition.addEventListener("speechend",()=>{this.recording=!1,this.recognition.stop()}),this.recognition.onerror=e=>{console.log(e.error)},this.recognition.addEventListener("nomatch",()=>{this.recording=!1,this.recognition.stop()}),this.textRequest$=new d.y(e=>{this.recognition.addEventListener("result",o=>{e.next(o.results[0][0].transcript)})})}initSynthesis(){this.voice=this.synthesis.getVoices().find(e=>e.lang.includes("fr-FR"))}speakSynthesis(e){const o=new SpeechSynthesisUtterance(e);o.addEventListener("start",()=>this.statusVoice=!0),o.addEventListener("end",()=>this.statusVoice=!1),o.voice=this.voice,o.pitch=1.3,o.rate=1.3,this.synthesis.speak(o)}makeRequest(){this.textRequest$.subscribe({next:e=>{this.textRequest=e,this.namanaService.requestOpenai(e).subscribe({next:o=>{this.responseError=!1,this.speakSynthesis(o.body.choices[0].text),this.textResponse=o.body.choices[0].text},error:o=>{this.responseError=!0,401===o.status?this.authService.logOut():(this.speakSynthesis(`${o.error.message}: ${o.status}`),this.textResponse=`${o.error.message}: ${o.status}`)}})}})}ngOnInit(){this.recording=!1,this.statusVoice=!1,this.voiceAnimations=[1,2,4,5,6,7,8,9,10],this.responseError=!1,this.initRecognition(),this.initSynthesis(),this.recognitionFeatures(),this.makeRequest()}onListen(){this.recording=!this.recording,this.recognition?this.recognition.start():this.recognition.stop()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(l),n.Y36(u.e))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-body"]],decls:20,vars:5,consts:[["id","section_namana",1,"container"],[1,"row","justify-content-center","p-1","position-relative"],[1,"col-12","my-2","py-1"],[1,"col-12","col-md-4","p-1","d-flex","align-items-center","justify-content-center","voice_namana"],["src","assets/images/bot.png",1,"img-fluid"],["id","voices",1,"d-flex","justify-content-center","align-items-center"],["class","voice",3,"class",4,"ngFor","ngForOf"],[1,"fs-1","nom_app"],[1,"row","justify-content-center"],["class","col-9 col-md-4 py-3 my-3","id","textRequest",4,"ngIf"],["class","col-9 col-md-4 py-3 my-1","id","textResponse",3,"style",4,"ngIf"],[1,"row"],[1,"col-12","my-4","py-4"],[1,"row","justify-content-center","section_micro","p-2"],[1,"col-12","d-flex","justify-content-center"],[1,"btn","rounded-circle","position-relative",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","49","height","49","viewBox","0 0 16 16","fill","#00959a",1,"my-2"],["d","M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0V3z"],["d","M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5z"],[1,"voice"],["id","textRequest",1,"col-9","col-md-4","py-3","my-3"],[1,"fw-bold","ms-2","me-1"],["id","textResponse",1,"col-9","col-md-4","py-3","my-1"]],template:function(e,o){1&e&&(n.TgZ(0,"div",0)(1,"div",1),n._UZ(2,"div",2),n.TgZ(3,"div",3),n._UZ(4,"img",4),n.TgZ(5,"div",5),n.YNc(6,h,1,2,"div",6),n.qZA(),n.TgZ(7,"span",7),n._uU(8,"Ranamana"),n.qZA()()(),n.TgZ(9,"div",8),n.YNc(10,p,4,1,"div",9),n.YNc(11,v,4,3,"div",10),n.qZA(),n.TgZ(12,"div",11),n._UZ(13,"div",12),n.qZA(),n.TgZ(14,"div",13)(15,"div",14)(16,"button",15),n.NdJ("click",function(){return o.onListen()}),n.O4$(),n.TgZ(17,"svg",16),n._UZ(18,"path",17)(19,"path",18),n.qZA()()()()()),2&e&&(n.xp6(6),n.Q6J("ngForOf",o.voiceAnimations),n.xp6(4),n.Q6J("ngIf",o.textRequest),n.xp6(1),n.Q6J("ngIf",o.textResponse),n.xp6(5),n.Tol(o.recording?"button_active_true":"button_active_false"))},dependencies:[c.sg,c.O5],styles:['#section_namana[_ngcontent-%COMP%]:before{content:"";position:absolute;position:fixed;top:0;bottom:0;left:0;width:100vw;height:100vh;background-image:linear-gradient(to right top,#008080,#00959a,#00aab5,#01c0d2,#11d6f0);z-index:-10}.section_micro[_ngcontent-%COMP%]{position:fixed;bottom:0;background:#f1fafb;border-radius:17px 17px 0 0;z-index:1000}.section_micro[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:20px 20px 43px #cdd5d5,-20px -20px 43px #fff;transition:all .5s ease-in-out;border:none}.section_micro[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .button_active_true[_ngcontent-%COMP%]{background:linear-gradient(145deg,#d9e1e2,#ffffff)}.section_micro[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .button_active_false[_ngcontent-%COMP%]{background:linear-gradient(145deg,#ffffff,#d9e1e2)}.section_micro[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .button_active_true[_ngcontent-%COMP%]:after, .section_micro[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .button_active_true[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;height:100%;width:100%;background-color:#00959a;border-radius:50%;z-index:-1;opacity:.7}.section_micro[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .button_active_true[_ngcontent-%COMP%]:before{animation:pulse_animation 2s ease-in-out infinite}.section_micro[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .button_active_true[_ngcontent-%COMP%]:after{animation:pulse_animation 2s 1s ease-in-out infinite}.voice_namana[_ngcontent-%COMP%]{background:linear-gradient(45deg,#10B9B9 0%,#43CDD6 100%);border-radius:60% 40% 30% 70%/60% 30% 70% 40%;transition:all .7s ease-in-out;animation:fancy_animation 7s ease-in-out infinite}.voice_namana[_ngcontent-%COMP%]   #voices[_ngcontent-%COMP%]{position:absolute;top:61%}.voice_namana[_ngcontent-%COMP%]   #voices[_ngcontent-%COMP%]   .voice[_ngcontent-%COMP%]{background:#008080;height:11px;width:2px;border-radius:7px;margin:0 2px}.voice_namana[_ngcontent-%COMP%]   #voices[_ngcontent-%COMP%]   .speak[_ngcontent-%COMP%]{animation:voice_animation 0ms -.6s linear infinite alternate}.voice_namana[_ngcontent-%COMP%]   #voices[_ngcontent-%COMP%]   .voice[_ngcontent-%COMP%]:nth-child(1){left:1px;animation-duration:474ms}.voice_namana[_ngcontent-%COMP%]   #voices[_ngcontent-%COMP%]   .voice[_ngcontent-%COMP%]:nth-child(2){left:15px;animation-duration:433ms}.voice_namana[_ngcontent-%COMP%]   #voices[_ngcontent-%COMP%]   .voice[_ngcontent-%COMP%]:nth-child(3){left:29px;animation-duration:407ms}.voice_namana[_ngcontent-%COMP%]   #voices[_ngcontent-%COMP%]   .voice[_ngcontent-%COMP%]:nth-child(4){left:43px;animation-duration:458ms}.voice_namana[_ngcontent-%COMP%]   #voices[_ngcontent-%COMP%]   .voice[_ngcontent-%COMP%]:nth-child(5){left:57px;animation-duration:.4s}.voice_namana[_ngcontent-%COMP%]   #voices[_ngcontent-%COMP%]   .voice[_ngcontent-%COMP%]:nth-child(6){left:71px;animation-duration:427ms}.voice_namana[_ngcontent-%COMP%]   #voices[_ngcontent-%COMP%]   .voice[_ngcontent-%COMP%]:nth-child(7){left:85px;animation-duration:441ms}.voice_namana[_ngcontent-%COMP%]   #voices[_ngcontent-%COMP%]   .voice[_ngcontent-%COMP%]:nth-child(8){left:99px;animation-duration:419ms}.voice_namana[_ngcontent-%COMP%]   #voices[_ngcontent-%COMP%]   .voice[_ngcontent-%COMP%]:nth-child(9){left:113px;animation-duration:487ms}.voice_namana[_ngcontent-%COMP%]   #voices[_ngcontent-%COMP%]   .voice[_ngcontent-%COMP%]:nth-child(10){left:127px;animation-duration:442ms}#textResponse[_ngcontent-%COMP%], #textRequest[_ngcontent-%COMP%]{background-color:#fff;border-radius:30% 70% 70% 30%/40% 64% 36% 60%}#textRequest[_ngcontent-%COMP%]{color:#0d091cd6}@media screen and (max-width: 767px){.section_micro[_ngcontent-%COMP%]{width:100%}}@media screen and (min-width: 767px){.section_micro[_ngcontent-%COMP%]{transform:translate(-50%);left:50%}}']}),t})()}];let f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[r.Bz.forChild(_),r.Bz]}),t})(),C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[c.ez,f]}),t})()}}]);